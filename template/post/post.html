{% extends 'master/base.html' %}

{% block body %}
<h1 style="text-align:center; margin-bottom:20px;">Blog List</h1>

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Content</th>
      <th>Category</th>
      <th>Status</th>
      <th>Image</th>
      <th>Published Date</th>
      <th>Updated At</th>
      <th>Created By</th>
      {% if request.user.user_type == 'Author' %}
      <th>Action</th>
      {% endif %}
      {% if request.user.user_type == 'Admin' %}
      <th>Admin Actions</th>
      {% endif %}
    </tr>
  </thead>
  <tbody>
  {% for i in post %}
    <tr>
      <td>{{ i.title }}</td>
      <td>{{ i.content|truncatechars:50 }}</td>
      <td>{{ i.category }}</td>
      <td>{{ i.status }}</td>
      <td>
        {% if i.image %}
          <img src="{{ i.image.url }}" width="80" style="border-radius:6px;">
        {% endif %}
      </td>
      <td>{{ i.published_date }}</td>
      <td>{{ i.updated_at }}</td>
      <td>{{ i.created_by }}</td>
      
      {% if request.user.user_type == 'Author' %}
      <td>
        <a href="{% url 'postEdit' i.id %}" class="btn">Edit</a>
        <a href="{% url 'postDlt' i.id %}" class="btn">Delete</a>
      </td>
      {% endif %}

      {% if request.user.user_type == 'Admin' %}
      <td>
        <button class="btn"><a href="{% url 'publish_status' i.id %}">Publish</a></button>
        <button class="btn"><a href="{% url 'reject_status' i.id %}">Reject</a></button>
        <button class="btn"><a href="{% url 'pending_status' i.id %}">Pending</a></button>
      </td>
      {% endif %}
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock body %}
